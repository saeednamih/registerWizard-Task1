<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
    crossorigin="anonymous">
  <title>Document</title>
</head>

<body>
  <div class="row mt-5">
    <div class="col-md-3"></div>
    <div class="col-md-6">
      <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item">
          <a class="nav-link " id="Personal_Details-tab" href="Personal_Details.html" role="tab" aria-controls="Personal_Details" aria-selected="true">Personal Details
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" id="Address-tab" href="Address.html" role="tab" aria-controls="Address" aria-selected="false">
            Address</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" id="More_details-tab" data-toggle="tab" href="More_details.html" role="tab" aria-controls="More_details
                  " aria-selected="false">More details
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link disabled" id="Summary-tab" href="Summary.html" role="tab" aria-controls="Summary
                    " aria-selected="false">Summary
          </a>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade " id="Personal_Details" role="tabpanel" aria-labelledby="Personal_Details-tab">Personal_Details</div>
        <div class="tab-pane fade" id="Address" role="tabpanel" aria-labelledby="Address-tab">Address</div>
        <div class="tab-pane fade show active" id="More_details" role="tabpanel" aria-labelledby="More_details-tab">

          <div class="container-fluid">
            <form class="needs-validation" novalidate>
              <div class="form-row mt-3">
                <div class="col-md-10 mb-2">
                  <label for="imgURL">Image URL :</label>
                  <input type="URL " class="form-control" id="imgURL" placeholder="Insert the image url" required>
                  <label class="label">Hobbies:</label>
                  <div class="form-check">
                      <div class="invalid-tooltip" id="emailTxt">
                          please choose a valid Email address
                        </div>
                    <div class="form-row"></div>
                    <div class="col-md-10 mb-2">
                      <div class="col-2">
                        <input class="form-check-input" type="checkbox" value="Movies" id="checkboxMoveir">
                        <label class="form-check-label" for="checkboxMoveir">
                          Movies
                        </label>
                      </div>

                      <div class="col-2">
                        <input class="form-check-input" type="checkbox" value="Surfing" id="defaultCheck1">
                        <label class="form-check-label" for="defaultCheck1">
                          Surfing
                        </label>
                      </div>

                      <div class="col-2">
                        <input class="form-check-input" type="checkbox" value="Sport" id="defaultCheck14">
                        <label class="form-check-label" for="defaultCheck14">
                          Sport
                        </label>
                      </div>

                      <div class="col-2">
                        <input class="form-check-input" type="checkbox" value="Cars" id="CarsCheck13">
                        <label class="form-check-label" for="CarsCheck13">
                          Cars
                        </label>
                      </div>

                      <div class="col-2">
                        <input class="form-check-input" type="checkbox" value="Dolls" id="defaultCheck12">
                        <label class="form-check-label" for="defaultCheck12">
                          Dolls
                        </label>
                      </div>

                    </div>
                  </div>
                  <button class=" col-2 mt-3 btn btn-primary" id="btnsave">Save</button>

                </div>

              </div>

          </div>

          </form>
        </div>


      </div>
      <div class="tab-pane fade" id="Summary" role="tabpanel" aria-labelledby="Summary-tab">Summary</div>
    </div>
  </div>
  <div class="col-md-3"></div>

  <script>
     //localStorag.clear();

    const form = document.querySelector('form'),
      imgURL = document.querySelector('#imgURL'),
      hobbies = document.querySelectorAll('[type=checkbox]'),
      btnSave = document.querySelector('button');
        (function () {
          'use strict';
          window.addEventListener('load', function () {
            // Fetch all the forms we want to apply custom Bootstrap validation styles to
            var forms = document.getElementsByClassName('needs-validation');
            // Loop over them and prevent submission
            if (!(localStorage.information)) {
              window.location.href = "Personal_Details.html";
            }
            if(!(localStorage.Address)){
              window.location.href = "Address.html";
            }
              const moreDetail = JSON.parse(localStorage.moreDetail);
              imgURL.value = moreDetail.imgURL;
              for(let i=0;i<5;i++){
              for(const hobby of hobbies) {
                if (moreDetail.listhobbies[i]==hobby.value) {
                      hobbies[i].checked=true;
                    }
                  }
                }
              console.log(moreDetail);

            var validation = Array.prototype.filter.call(forms, function (form) {
              form.addEventListener('submit', function (event) {
                if (form.checkValidity() === false) {
                  event.preventDefault();
                  event.stopPropagation();
                }
                else {
                  event.preventDefault();
                }
                form.classList.add('was-validated');

                if (form.checkValidity() == true) {
                  const moreDetail = {
                    imgURL: imgURL.value,
                    listhobbies :[]
                  };
                  for(const hobby of hobbies) {
                    if (hobby.checked) {
                      moreDetail.listhobbies.push(hobby.value);
                    }
                }
                
                  localStorage.moreDetail = JSON.stringify(moreDetail);
                  window.location.href = "Summary.html";
                }
              }, false);
            });
          }, false);
        })();
// <!-- 
//     btnSave.addEventListener('click', () => {
//       const moreDetails = {
//         imgURL: imgURL.value,
//         listhobbies: []
//       };
//       for (const hobby of hobbies) {
//         if (hobby.checked) {
//           moreDetails.listhobbies.push(hobby.value);
//         }
//       }
//       moreDetails.imgURL = imgURL.value
//       console.log(moreDetails);
//       localStorage.moreDetails = JSON.stringify(moreDetails);
//     });
//     if (localStorage.moreDetails) {
//       const moreDetails = JSON.parse(localStorage.moreDetails);
//       let j = 0;
//       imgURL.value = moreDetails.imgURL;
//       for (let i = 0; i < hobbies.length; i++) {

//         if (hobbies[i].value == moreDetails.listhobbies[j]) {
//           hobbies[i].checked = true;
//           j++;
//         }
//       }
//     }
//     console.log(localStorage.moreDetails);
//     form.addEventListener('submit', (event) => {
//       event.preventDefault();
//     }); -->
  </script>
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>


</body>

</html>